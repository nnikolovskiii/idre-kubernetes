# Global settings
storageClass: "hcloud-volumes"
imagePullSecrets:
  - name: regcred
# Certificate Manager
clusterIssuer:
  email: "nikolovski.nikola42@gmail.com"
# Ingress Configuration
ingress:
  enabled: true
  hosts:
    frontend: "k8s.idre.live"
    backend: "k8s.gcb.nikolanikolovski.com"
# --- Infrastructure Components ---
postgres:
  image:
    repository: postgres
    tag: "16"
  storage: "10Gi"
  dbName: "postgres"
  user: "postgres"
  # Password should ideally come from a pre-existing secret, 
  # but we reference the secret name here
  secretName: "postgres-secret"
redis:
  image:
    repository: redis
    tag: "6"
  storage: "5Gi"
seaweedfs:
  image:
    repository: chrislusf/seaweedfs
    tag: "latest" # or specify specific version
  storage: "20Gi"
  resources:
    limits:
      memory: "1Gi"
    requests:
      memory: "512Mi"
# --- Application Components ---
frontend:
  image:
    repository: nnikolovskii/gc-frontend
    tag: "5a3ea3876bd6a8a3282ef0df75facf92f64e93c0"
    pullPolicy: Always
  service:
    port: 3000
  resources:
    limits:
      memory: "256Mi"
    requests:
      memory: "128Mi"
  config:
    viteApiBaseUrl: "https://k8s.gcb.nikolanikolovski.com"
    viteGoogleClientId: "977607414494-uc5qvjun88vm7nguhm4vgls91j4mfcas.apps.googleusercontent.com"
backend:
  image:
    repository: nnikolovskii/gc-backend
    tag: "5a3ea3876bd6a8a3282ef0df75facf92f64e93c0"
    pullPolicy: Always
  service:
    port: 8001
  resources:
    limits:
      memory: "550Mi"
    requests:
      memory: "256Mi"
ai:
  image:
    repository: nnikolovskii/gc-ai
    tag: "5a3ea3876bd6a8a3282ef0df75facf92f64e93c0"
    pullPolicy: Always
  service:
    port: 8000
  resources:
    limits:
      memory: "1Gi"
    requests:
      memory: "512Mi"
# --- Add at the end of values.yaml ---
# Autoscaling Configuration
autoscaling:
  frontend:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  backend:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 80
  ai:
    enabled: true
    minReplicas: 2
    maxReplicas: 8
    targetCPUUtilizationPercentage: 60
    targetMemoryUtilizationPercentage: 70
# Pod Anti-Affinity (spread pods across nodes)
podAntiAffinity:
  enabled: true
  # "soft" = preferredDuringSchedulingIgnoredDuringExecution
  # "hard" = requiredDuringSchedulingIgnoredDuringExecution
  type: "soft"
